import{f as B,g as z}from"./chunk-OC3SIIWC.js";import{a as _,b as E,c as R,d as C,e as A,f as G,g as V,h as N}from"./chunk-V2FUWDDZ.js";import{E as y,F as r,Fa as w,G as p,Ga as F,Ka as g,N as M,P as i,Q as O,Sa as S,W as a,X as s,Y as u,Ya as k,Za as L,ba as d,ca as I,ja as x,n as v,pa as m,r as l,y as P,z as c}from"./chunk-4FVIKDPJ.js";var T=e=>(e.value||"").trim().length!==(e.value||"").length?{whitespace:!0}:null;function Z(e,t){if(e&1&&u(0,"img",2),e&2){let n=I();i("src","assets/svg/"+n.iconImg,y)}}var H=0,f=class e{label="";id="";type="default";severity="primary";size=null;icon="";iconPosition="right";loading=!1;disabled=!1;rounded=!1;text=!1;outlined=!1;full=!1;iconImg=null;classes="";clicked=new c;buttonId=`app-button-${H++}`;ngOnInit(){this.id&&this.id!==""&&(this.buttonId=this.id)}onClicked(t){this.disabled||this.clicked.emit(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=l({type:e,selectors:[["app-button"]],inputs:{label:"label",id:"id",type:"type",severity:"severity",size:"size",icon:"icon",iconPosition:"iconPosition",loading:"loading",disabled:"disabled",rounded:"rounded",text:"text",outlined:"outlined",full:"full",iconImg:"iconImg",classes:"classes"},outputs:{clicked:"clicked"},standalone:!0,features:[m],decls:2,vars:15,consts:[["pButton","","type","button",3,"click","label","icon","loading","disabled","rounded","text","outlined","iconPos","size","severity","id","ngClass"],["alt","ic",3,"src",4,"ngIf"],["alt","ic",3,"src"]],template:function(n,o){n&1&&(a(0,"button",0),d("click",function(q){return o.onClicked(q)}),M(1,Z,1,1,"img",1),s()),n&2&&(O("p-full",o.full),i("label",o.label)("icon",o.icon?o.icon:"")("loading",o.loading)("disabled",o.disabled)("rounded",o.rounded)("text",o.text)("outlined",o.outlined)("iconPos",o.iconPosition)("size",o.size)("severity",o.severity)("id",o.buttonId)("ngClass",o.classes),r(),i("ngIf",o.iconImg))},dependencies:[z,B,g,w,F],styles:["@layer prime-theme{  .p-button-label{font-family:Open Sans,sans-serif;font-weight:400}.p-button[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;border-radius:8px;box-shadow:none;position:relative;width:auto}.p-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;margin-right:12px}.p-full[_ngcontent-%COMP%]{width:100%}.p-button-primary[_ngcontent-%COMP%]{background-color:#053da5;border-color:#053da5}.p-button-primary[_ngcontent-%COMP%]:hover{border-color:#012060;background-color:#012060}.p-button-primary[_ngcontent-%COMP%]:active{border-color:#053da5;background-color:#053da5}.p-button-primary.p-button-outlined[_ngcontent-%COMP%]{background-color:#fff;border-color:#053da5;color:#053da5;transition:none}.p-button-primary.p-button-outlined[_ngcontent-%COMP%]:hover, .p-button-primary.p-button-outlined[_ngcontent-%COMP%]:active{background-color:#9570de}.p-button-primary.p-button-outlined[_ngcontent-%COMP%]:active{background-color:#2a363b;border-color:#eff3fd}.p-button-secondary[_ngcontent-%COMP%]{background-color:#0371f2;border-color:#0371f2}.p-button-secondary[_ngcontent-%COMP%]:hover, .p-button-secondary[_ngcontent-%COMP%]:active{border-color:#05a9e8;background-color:#05a9e8}.p-button-secondary.p-button-outlined[_ngcontent-%COMP%]{background-color:#414247;border-color:#ababaf;color:#0371f2;transition:none}.p-button-secondary.p-button-outlined[_ngcontent-%COMP%]:hover, .p-button-secondary.p-button-outlined[_ngcontent-%COMP%]:active{border-color:#35bdf599;background-color:#35bdf599;color:#fff}.p-button-secondary.p-button-outlined[_ngcontent-%COMP%]:active{border-color:#0371f2;background-color:#0371f2;color:#fff}.p-button-contrast[_ngcontent-%COMP%]{background:#fff;border:1px solid #222226;color:#888}.p-button-sm[_ngcontent-%COMP%]{font-size:12px;padding:8px 10.5px;min-height:36px}.p-button-sm[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px}.p-button-lg[_ngcontent-%COMP%]{font-size:16px;padding:12px 20px}.p-button-lg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.p-button-dropdown[_ngcontent-%COMP%]{border-radius:8px;padding:5px 7px;width:auto}.p-button-dropdown[_ngcontent-%COMP%]     .p-button-icon.pi{font-size:12px}}"],changeDetection:0})};var U=e=>e.value?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.value)?null:{email:!0}:null;var b=class e extends k{changeToken=new c;loginByEmail(t){return this.request("POST","auth/login",t)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=P(e)))(o||e)}})();static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var h=class e{constructor(t,n,o){this.router=t;this.authService=n;this.authLocalService=o;this.formGroup=new R(this.formObject)}isConfirmation=!1;formGroup;formObject={email:new C("",[_.required,U]),password:new C("",[_.required,T])};isLoader=!1;touchedForm=!1;sendFormLogin(){this.formGroup.valid?(this.isLoader=!0,this.authService.loginByEmail(this.formGroup.value).subscribe({next:t=>{this.isLoader=!1,this.processResponseLogin(t.data)},error:t=>{this.isLoader=!1,this.isConfirmation=!0,console.error(t)}})):this.touchedForm=!0}processResponseLogin(t){localStorage.setItem("dataUser",JSON.stringify(t));let n=this.authLocalService.getRedirectUrl();n?(this.authLocalService.clearRedirectUrl(),this.router.navigateByUrl(n)):this.router.navigateByUrl("")}get userNameControl(){return this.formGroup.get("email")}get passwordControl(){return console.log(this.formGroup.get("password"),"this.formGroup.get(pass)"),this.formGroup.get("password")}static \u0275fac=function(n){return new(n||e)(p(S),p(b),p(L))};static \u0275cmp=l({type:e,selectors:[["app-login-page"]],standalone:!0,features:[m],decls:9,vars:6,consts:[[1,"container__login"],[1,"h2","text-primary","fs-1"],["autocomplete","true","id","form-login",1,"flex","flex-column","gap-10",3,"formGroup"],[1,"flex","flex-column","gap-3"],["label","correo","placeholder","Ingresar correo","iconLeft","user","name","username",3,"control","touched"],["label","Nueva contrase\xF1a","placeholder","Ingresar contrase\xF1a","iconLeft","lock","name","newPassword",3,"isPassword","control","touched"],["label","Iniciar sesi\xF3n",3,"clicked"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"section")(2,"p",1),x(3,"Inicia sesi\xF3n"),s()(),a(4,"form",2)(5,"div",3),u(6,"app-input",4)(7,"app-input",5),a(8,"app-button",6),d("clicked",function(){return o.sendFormLogin()}),s()()()()),n&2&&(r(4),i("formGroup",o.formGroup),r(2),i("control",o.userNameControl)("touched",o.touchedForm),r(),i("isPassword",!0)("control",o.passwordControl)("touched",o.touchedForm))},dependencies:[g,V,A,E,G,N,f],styles:[".container__login[_ngcontent-%COMP%]{display:flex;gap:42px;flex-direction:column;margin:0}.container__login[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin:0;width:100%}.container__login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.container__login[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#fff;text-align:center}.container__login__line[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 125px 1fr;gap:16px;width:100%;align-items:center}.container__login__line__separator[_ngcontent-%COMP%]{height:0;border-top:1px solid #ffffff}.container__login__actions[_ngcontent-%COMP%]{width:100%}"]})};var Mo=[{path:"iniciar-sesion",component:h},{path:"",redirectTo:"iniciar-sesion",pathMatch:"full"}];export{Mo as AUTH_ROUTES};
